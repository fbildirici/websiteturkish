<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Podcast - Fatih Bildirici</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header class="header">
    <div class="container">
      <div class="header-inner">
        <a href="index.html" class="logo">FATİH BİLDİRİCİ</a>
        <nav class="nav">
          <a href="hakkinda.html" class="nav-link">Hakkında</a>
          <a href="yazilar.html" class="nav-link">Yazılar</a>
          <a href="podcast.html" class="nav-link active">Podcast</a>
          <a href="akademik.html" class="nav-link">Akademik</a>
        </nav>
        <a href="#bulten" class="btn-primary">Bültene Kaydol</a>
      </div>
    </div>
  </header>

  <main class="podcast-page">
    <div class="container">
      
      <!-- Podcast Header -->
      <div class="podcast-header">
        <div class="podcast-header-left">
          <h1>Podcast</h1>
          <p class="podcast-desc">"Otostopçunun Yapay Zeka Rehberi" ile Douglas Adams'ın eserinden ilham alarak, yapay zekanın karmaşık dünyasını anlaşılır kılıyoruz. Makine öğrenmesinden etik tartışmalara, nöral ağlardan pratik uygulamalara kadar Türkiye'nin en çok dinlenen yapay zeka podcast'i.</p>
          <div class="podcast-tags">
            <span class="podcast-tag active">Otostopçunun YZ Rehberi</span>
          </div>
        </div>
        <div class="podcast-header-right">
          <form class="search-form" id="podcastSearchForm">
            <input type="text" placeholder="Podcast ara..." class="search-input" id="podcastSearchInput">
            <button type="submit" class="search-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
            </button>
          </form>
        </div>
      </div>

      <!-- Podcast Grid -->
      <div class="podcast-grid" id="podcast-grid">
        <!-- Bölümler RSS'den dinamik olarak yüklenecek -->
        <div class="loading-spinner" style="grid-column: 1 / -1; text-align: center; padding: 60px;">
          <p style="color: #666;">Bölümler yükleniyor...</p>
        </div>
      </div>

      <!-- Load More -->
      <div class="load-more">
        <a href="https://podcasts.apple.com/tr/podcast/otostop%C3%A7unun-yapay-zeka-rehberi/id1801285722" target="_blank" class="btn-outline">Devamını gör →</a>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="footer" id="bulten">
    <div class="container">
      <div class="footer-top">
        <div class="footer-newsletter">
          <h3>Bültenime kaydol</h3>
          <p>Kaydolarak son gelişmelere, podcast ve yazılı içeriklere e-posta bülteni üzerinden ulaşabilirsiniz.</p>
          <div class="newsletter-form-inline" onclick="window.open('https://otostopcununyzrehberi.substack.com/subscribe', '_blank')" style="cursor: pointer;">
            <input type="email" placeholder="E-posta adresiniz" readonly style="cursor: pointer;">
            <button type="button" class="btn-primary">Kaydol</button>
          </div>
          <p class="newsletter-legal"><a href="aydinlatma-metni.html">Aydınlatma metnini</a> okudum, kişisel verilerimin işlenmesine ve tarafıma ticari elektronik ileti gönderilmesine <a href="acik-riza-metni.html">açık rıza</a> veriyorum.</p>
        </div>
        <div class="footer-links">
          <div class="footer-col">
            <h4>İçerikler</h4>
            <a href="hakkinda.html">Hakkında</a>
            <a href="yazilar.html">Yazılar</a>
            <a href="podcast.html">Podcast</a>
          </div>
          <div class="footer-col">
            <h4>Sözleşmeler</h4>
            <a href="aydinlatma-metni.html">Aydınlatma Metni</a>
            <a href="acik-riza-metni.html">Açık Rıza Metni</a>
            <a href="gizlilik-politikasi.html">Gizlilik Politikası</a>
          </div>
          <div class="footer-col">
            <h4>İletişim</h4>
            <a href="iletisim.html">İletişim</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
          <p>© 2026. Tüm hakları saklıdır.</p>
          <div class="social-links">
            <a href="mailto:hello@fatihbildirici.com" target="_blank" class="social-icon" aria-label="Mail">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 2v.01L12 13 4 6.01V6h16zM4 20v-9.99l8 6.99 8-6.99V20H4z"/></svg>
            </a>
            <a href="https://instagram.com/fatihbildirici" target="_blank" class="social-icon" aria-label="Instagram">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
            </a>
            <a href="https://youtube.com/@fatihbildirici" target="_blank" class="social-icon" aria-label="YouTube">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M21.8 8.001s-.2-1.4-.8-2c-.7-.8-1.5-.8-1.9-.9C16.2 5 12 5 12 5h-.1s-4.2 0-7.1.1c-.4.1-1.2.1-1.9.9-.6.6-.8 2-.8 2S2 9.6 2 11.2v1.6c0 1.6.2 3.2.2 3.2s.2 1.4.8 2c.7.8 1.7.8 2.1.9 1.5.1 6.9.1 6.9.1s4.2 0 7.1-.1c.4-.1 1.2-.1 1.9-.9.6-.6.8-2 .8-2s.2-1.6.2-3.2v-1.6c0-1.6-.2-3.2-.2-3.2zM9.8 15.1V8.9l6.2 3.1-6.2 3.1z"/></svg>
            </a>
            <a href="https://linkedin.com/in/fatihbildirici" target="_blank" class="social-icon" aria-label="LinkedIn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </a>
          </div>
      </div>
    </div>
  </footer>

  <script>
    // RSS Feed'den Podcast Bölümlerini Çek
    const RSS_URL = 'https://anchor.fm/s/101fc0074/podcast/rss';
    const MAX_EPISODES = 12;
    const DEFAULT_IMAGE = 'https://d3t3ozftmdmh3i.cloudfront.net/staging/podcast_uploaded_nologo/43182597/43182597-1762802752790-6f397aa01c377.jpg';
    const CACHE_KEY = 'podcast_rss_cache';
    const CACHE_DURATION = 30 * 60 * 1000; // 30 dakika

    async function loadPodcastEpisodes() {
      const grid = document.getElementById('podcast-grid');

      // Cache'i kontrol et
      const cached = localStorage.getItem(CACHE_KEY);
      let xmlText = null;

      if (cached) {
        try {
          const { data, timestamp } = JSON.parse(cached);
          if (Date.now() - timestamp < CACHE_DURATION) {
            xmlText = data;
            console.log('RSS cache\'den yüklendi');
          }
        } catch (e) {
          localStorage.removeItem(CACHE_KEY);
        }
      }

      // Cache yoksa veya eskiyse fetch et
      if (!xmlText) {
        // Birden fazla CORS proxy dene
        const corsProxies = [
          'https://api.allorigins.win/get?url=',
          'https://api.allorigins.win/raw?url=',
          'https://corsproxy.io/?'
        ];

        for (const proxy of corsProxies) {
          try {
            const controller = new AbortController();
            const timeout = setTimeout(() => controller.abort(), 5000);

            const response = await fetch(proxy + encodeURIComponent(RSS_URL), {
              signal: controller.signal
            });
            clearTimeout(timeout);

            if (response.ok) {
              // JSON wrapper mı yoksa raw mı kontrol et
              if (proxy.includes('/get?url=')) {
                const data = await response.json();
                xmlText = data.contents;
              } else {
                xmlText = await response.text();
              }

              if (xmlText && xmlText.includes('<item>')) {
                // Cache'e kaydet
                localStorage.setItem(CACHE_KEY, JSON.stringify({
                  data: xmlText,
                  timestamp: Date.now()
                }));
                console.log('RSS başarıyla yüklendi:', proxy);
                break;
              }
            }
          } catch (e) {
            console.log('Proxy failed:', proxy, e);
          }
        }
      }

      if (!xmlText || !xmlText.includes('<item>')) {
        grid.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 60px;">
            <p style="color: #666;">Bölümler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin.</p>
          </div>
        `;
        return;
      }
      
      try {
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, 'text/xml');
        
        const items = xml.querySelectorAll('item');
        let html = '';
        
        const episodes = Array.from(items).slice(0, MAX_EPISODES);
        
        episodes.forEach((item) => {
          const title = item.querySelector('title')?.textContent || 'Başlıksız Bölüm';
          const description = item.querySelector('description')?.textContent || '';
          const pubDate = item.querySelector('pubDate')?.textContent || '';
          const link = item.querySelector('link')?.textContent || '#';
          
          // Bölüme özel kapak resmini al - farklı yöntemler dene
          let itunesImage = DEFAULT_IMAGE;
          
          // Yöntem 1: Namespace ile
          const itunesImageNS = item.getElementsByTagNameNS('http://www.itunes.com/dtds/podcast-1.0.dtd', 'image');
          if (itunesImageNS.length > 0 && itunesImageNS[0].getAttribute('href')) {
            itunesImage = itunesImageNS[0].getAttribute('href');
          } else {
            // Yöntem 2: Regex ile XML'den çıkar
            const itemXml = new XMLSerializer().serializeToString(item);
            const imageMatch = itemXml.match(/itunes:image[^>]*href=["']([^"']+)["']/i);
            if (imageMatch && imageMatch[1]) {
              itunesImage = imageMatch[1];
            }
          }
          
          // Tarihi formatla
          const date = new Date(pubDate);
          const formattedDate = date.toLocaleDateString('tr-TR', { 
            day: 'numeric', 
            month: 'short', 
            year: 'numeric' 
          });
          
          // Açıklamayı temizle ve kısalt
          let cleanDesc = description
            .replace(/<[^>]*>/g, '')
            .replace(/&nbsp;/g, ' ')
            .replace(/&amp;/g, '&')
            .replace(/&#39;/g, "'")
            .replace(/&quot;/g, '"')
            .trim();
          cleanDesc = cleanDesc.length > 120 ? cleanDesc.substring(0, 120) + '...' : cleanDesc;
          
          // Başlıktan özel karakterleri temizle
          const cleanTitle = title.replace(/</g, '&lt;').replace(/>/g, '&gt;');
          
          html += `
            <div class="podcast-card">
              <a href="${link}" target="_blank" class="podcast-card-image">
                <img src="${itunesImage}" alt="${cleanTitle}" loading="lazy" onerror="this.src='${DEFAULT_IMAGE}'">
              </a>
              <div class="podcast-card-body">
                <div class="podcast-card-meta">
                  <span class="podcast-card-tag">Podcast</span>
                  <span class="podcast-card-date">${formattedDate}</span>
                </div>
                <h3 class="podcast-card-title">${cleanTitle}</h3>
                <p class="podcast-card-desc">${cleanDesc}</p>
                <div class="podcast-card-links">
                  <a href="https://podcasts.apple.com/tr/podcast/otostop%C3%A7unun-yapay-zeka-rehberi/id1801285722" target="_blank" title="Apple Podcasts">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Podcasts_%28iOS%29.svg" alt="Apple Podcasts">
                  </a>
                  <a href="https://open.spotify.com/show/4wJPUBJcqQsnoLxWqEMCjJ" target="_blank" title="Spotify">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">
                  </a>
                  <a href="https://www.youtube.com/@otostopcununyzrehberipodcast" target="_blank" title="YouTube">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg" alt="YouTube">
                  </a>
                </div>
              </div>
            </div>
          `;
        });
        
        grid.innerHTML = html;
        
      } catch (error) {
        console.error('Podcast parse hatası:', error);
        grid.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 60px;">
            <p style="color: #666;">Bölümler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin.</p>
          </div>
        `;
      }
    }

    // Sayfa yüklendiğinde çalıştır
    document.addEventListener('DOMContentLoaded', loadPodcastEpisodes);

    // Podcast Arama Fonksiyonu
    document.addEventListener('DOMContentLoaded', function() {
      const searchForm = document.getElementById('podcastSearchForm');
      const searchInput = document.getElementById('podcastSearchInput');
      const podcastGrid = document.getElementById('podcast-grid');

      let allPodcasts = [];

      // Podcast'ler yüklendikten sonra listeyi sakla
      const originalLoadPodcastEpisodes = loadPodcastEpisodes;
      loadPodcastEpisodes = async function() {
        await originalLoadPodcastEpisodes();
        // Yüklenen kartları sakla
        allPodcasts = Array.from(podcastGrid.querySelectorAll('.podcast-card')).map(card => ({
          element: card.cloneNode(true),
          title: card.querySelector('.podcast-card-title')?.textContent.toLowerCase() || '',
          desc: card.querySelector('.podcast-card-desc')?.textContent.toLowerCase() || ''
        }));
      };

      // Arama fonksiyonu
      function searchPodcasts(query) {
        const lowerQuery = query.toLowerCase().trim();

        if (!lowerQuery) {
          // Tüm podcast'leri göster
          podcastGrid.innerHTML = '';
          allPodcasts.forEach(podcast => {
            podcastGrid.appendChild(podcast.element.cloneNode(true));
          });
          return;
        }

        // Filtreleme
        const filtered = allPodcasts.filter(podcast =>
          podcast.title.includes(lowerQuery) || podcast.desc.includes(lowerQuery)
        );

        // Sonuçları göster
        if (filtered.length === 0) {
          podcastGrid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 60px;">
              <p style="color: #666; font-size: 14px;">
                <strong>"${query}"</strong> için sonuç bulunamadı.
              </p>
            </div>
          `;
        } else {
          podcastGrid.innerHTML = '';
          filtered.forEach(podcast => {
            podcastGrid.appendChild(podcast.element.cloneNode(true));
          });
        }
      }

      // Form submit
      if (searchForm) {
        searchForm.addEventListener('submit', function(e) {
          e.preventDefault();
          searchPodcasts(searchInput.value);
        });
      }

      // Gerçek zamanlı arama (opsiyonel)
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          searchPodcasts(this.value);
        });
      }
    });
  </script>

</body>
</html>
